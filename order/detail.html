<!-- 쇼핑몰 메인 페이지 샘플 코드  -->
<!DOCTYPE html>
<html>

<head>
    <title>쇼핑몰 메인 페이지</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
    <link rel="icon" href="/gagtm/favicon.png" type="image/x-icon" />
    <style>
        footer {
            position: fixed;
            bottom: 0;
            width: 100%;
            height: 50px;
            background-color: #f5f5f5;
            text-align: center;
        }

        footer p {
            margin-top: 10px;
        }

        .main {
            margin-bottom: 100px;
        }
    </style>

    <!-- Google Tag Manager -->
    <script>(function (w, d, s, l, i) {
            w[l] = w[l] || []; w[l].push({
                'gtm.start':
                    new Date().getTime(), event: 'gtm.js'
            }); var f = d.getElementsByTagName(s)[0],
                j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
                    'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
        })(window, document, 'script', 'dataLayer', 'GTM-P63F2WFH');</script>
    <!-- End Google Tag Manager -->

</head>

<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-P63F2WFH" height="0" width="0"
            style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <div class="container main">
        <header>
            <h1>테스트 쇼핑몰</h1>
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <a class="navbar-brand" href="/gagtm">GAGTM</a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                        data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false"
                        aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
                        <div class="navbar-nav">
                            <a class="nav-link active" aria-current="page" href="#">Home</a>
                            <a class="nav-link" href="#">Features</a>
                            <a class="nav-link" href="#">Pricing</a>
                        </div>
                    </div>
                </div>
            </nav>
        </header>
        <section>

            <h2 class="mt-5">주문 내역</h2>

            <div class="card" style="width:18rem;">
                <img class="card-img-top" id="prodcut_image" src="https://picsum.photos/200/200?random=1"
                    alt="상품 이미지" />
                <div class="card-body">

                    <p>product code: <span id="product_code"></span></p>
                    <h3 id="product"></h3>
                    <p>가격: <span id="price"></span>원</p>


                    <p>주문 수량: <input type="number" id="quantity" value="1" /></p>
                </div>
            </div>


            <h4 class="mt-5">주문자 정보</h4>
            <div class="mb-3">
                <label for="name" class="form-label">이름</label>
                <input type="text" class="form-control" id="name" />
            </div>
            <div class="mb-3">
                <label for="phone" class="form-label">전화번호</label>
                <input type="text" class="form-control" id="phone" />
            </div>
            <div class="mb-3">
                <label for="address" class="form-label">주소</label>
                <input type="text" class="form-control" id="address" />
            </div>

            <h4 class="mt-5">결제 정보</h4>
            <button id="credit_card">신용카드</button>
            <button id="account_transfer">계좌이체</button>
            <div class="mb-3 mt-2">
                <label for="card" class="form-label">카드 번호</label>
                <input type="text" class="form-control" id="card" />
            </div>
            <div class="mb-3">
                <label for="expiration" class="form-label">유효기간</label>
                <input type="text" class="form-control" id="expiration" />
            </div>


            <button class="btn btn-primary" onclick="orderComplate()">주문하기</button>
    </div>



    </section>
    <footer>
        <p>©2024 GAGTM</p>
    </footer>
    <script>
        function orderComplate() {
            const queryString = window.location.search;
            const urlParams = new URLSearchParams(queryString);
            const product = urlParams.get('product');
            const price = urlParams.get('price');
            const quantity = document.getElementById('quantity').value;
            const product_code = 'product' + document.querySelector("#product").innerText.slice(-1);
            document.getElementById('product').innerText = product;
            document.getElementById('price').innerText = price;
            window.location.href = `./complete.html?product=${product}&price=${price}&quantity=${quantity}&product_code=${product_code}`;
        }


        document.getElementById('product').innerText = decodeURI(decodeURIComponent(window.location.href.split('?')[1].split('&')[1].split('=')[1]));
        document.getElementById('price').innerText = decodeURI(decodeURIComponent(window.location.href.split('?')[1].split('&')[0].split('=')[1]));
        //right 1 character is cut off
        document.getElementById('product_code').innerText = 'product' + document.querySelector("#product").innerText.slice(-1);
        var product = decodeURI(decodeURIComponent(window.location.href.split('?')[1].split('&')[1].split('=')[1]));
        switch (product) {
            case "상품1":
                document.getElementById('prodcut_image').src = "../1.jpg";
                break;
            case "상품2":
                document.getElementById('prodcut_image').src = "../2.jpg";
                break;
            case "상품3":
                document.getElementById('prodcut_image').src = "../3.jpg";
                break;
            case "상품4":
                document.getElementById('prodcut_image').src = "../4.jpg";
                break;
        }
    </script>
</body>

</html>